---
trigger: manual
description:
globs:
---
# Validation Rules

## Regole Fondamentali
- Ogni validazione deve essere una classe dedicata
- Estendere `Illuminate\Validation\Rule`
- Implementare i metodi obbligatori
- Documentare la validazione
- Testare la validazione

## Struttura
- Namespace corretto: `App\Rules` o `Modules\{Module}\Rules`
- Nome classe in PascalCase con suffisso `Rule`
- Metodi obbligatori: `passes()`, `message()`

## Esempio Corretto
```php
// CORRETTO
class UniqueEmailRule extends Rule
{
    public function __construct(
        protected ?string $ignore = null
    ) {
    }

    public function passes($attribute, $value): bool
    {
        $query = User::query()->where('email', $value);

        if ($this->ignore) {
            $query->where('id', '!=', $this->ignore);
        }

        return !$query->exists();
    }

    public function message(): string
    {
        return __('validation.unique', ['attribute' => 'email']);
    }
}
```

## Best Practices
- Classi dedicate
- Validazione completa
- Messaggi tradotti
- Test di unit√†
- Gestione errori

## Checklist
- [ ] Validazione documentata
- [ ] Test scritti
- [ ] Messaggi tradotti
- [ ] Gestione errori implementata
- [ ] Performance ottimizzata

## Collegamenti correlati
- [Filament Best Practices](mdc:../.windsurf/rules/filament-best-practices.mdc)
- [Migration Best Practices](mdc:../.windsurf/rules/migrations.mdc)
- [Error Handling](mdc:../.windsurf/rules/error-handling.mdc)
- [Documentation Standards](mdc:../.windsurf/rules/documentation.mdc)
- [Checklist di Ripartenza](mdc:../docs/checklist-di-ripartenza.md)
