---
description: 
globs: 
alwaysApply: true
---
# Windsurf â€“ Regole, Best Practice e Integrazione MCP

## Struttura e Aggiornamento Documentazione
- Seguire la gerarchia: docs/ (globale), Modules/[Module]/docs/ (modulo), .windsurf/rules (regole Windsurf)
- Ogni nuova regola va documentata sia nel modulo che nella root, con backlink e motivazione
- Aggiornare sempre .windsurf/rules per ogni variazione
- Mantenere la coerenza tra .windsurf/rules, .cursor/rules e la documentazione dei moduli

## Regole Windsurf sulle Migrazioni
- Usare **solo classi anonime** per le migrazioni (mai nominali)
- Non creare mai una nuova migrazione di update per aggiungere colonne: copiare la migrazione di creazione, aggiornare il timestamp, aggiungere la colonna solo se non esiste
- Mai implementare il metodo `down` nelle migrazioni anonime
- Documentare ogni modifica e aggiornare i backlink

## Convenzioni Laraxot
- Namespace senza segmento `app` (es: `Modules\NomeModulo\Models`)
- Data Object con Spatie Laravel Data in `Modules/NomeModulo/app/Datas/`
- Azioni asincrone con Spatie QueueableAction in `Modules/NomeModulo/app/Actions/`
- Tipizzazione rigorosa per PHPStan livello 10

## Esempio di Configurazione windsurf.config.js
```js
module.exports = {
    mcp: {
        enabled: true,
        providers: ['tenant', 'user'],
        validation: true,
        propagation: true
    }
};
```

## Checklist per Aggiornamento Regole
1. Analizza l'impatto (modulo/globale)
2. Aggiorna la documentazione del modulo e la root
3. Aggiorna .windsurf/rules e .cursor/rules
4. Fornisci esempi pratici e motivazione
5. Crea/aggiorna backlink e riferimenti incrociati
6. Valida la coerenza tra tutte le documentazioni

## Best Practice
- Validare sempre il contesto prima dell'uso
- Utilizzare oggetti di contesto immutabili
- Documentare i requisiti di contesto
- Implementare la propagazione del contesto
- Usare il contesto anche per logging e monitoring
- Audit di sicurezza periodici

## Collegamenti e Risorse
- [MODULE_NAMESPACE_RULES.md](mdc:../../docs/MODULE_NAMESPACE_RULES.md)
- [model_context_protocol.md](mdc:../../docs/model_context_protocol.md)
- [mcp_implementation_guide.md](mdc:../../docs/mcp_implementation_guide.md)
- [mcp_errors_and_lessons.md](mdc:../../docs/mcp_errors_and_lessons.md)
- [phpstan_usage.md](mdc:../../docs/phpstan_usage.md)
- [laraxot_conventions.md](mdc:../../docs/laraxot_conventions.md)
- [laraxot-framework.md](mdc:../../docs/laraxot-framework.md)
- [README.md](mdc:../../docs/README.md)

## Ultimo aggiornamento
2025-05-13
