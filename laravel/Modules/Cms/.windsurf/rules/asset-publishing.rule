# Regole per la Pubblicazione degli Asset

## Problemi Comuni
- ❌ Timeout durante `vendor:publish --tag=laravel-assets`
- ❌ Pubblicazione di tutti gli asset in una volta
- ❌ Mancata verifica degli asset necessari

## Best Practices

### 1. Pubblicazione Mirata
```bash
# ✅ CORRETTO: Pubblicare solo gli asset necessari
php artisan filament:assets
php artisan vendor:publish --tag=filament-assets
php artisan vendor:publish --provider="VendorName\PackageName\ServiceProvider" --tag="assets"

# ❌ ERRATO: Pubblicare tutti gli asset
php artisan vendor:publish --tag=laravel-assets
```

### 2. Verifica Preliminare
```bash
# Prima della pubblicazione
ls -la public/vendor
ls -la public_html/vendor

# Dopo la pubblicazione
ls -la public/vendor
ls -la public_html/vendor
```

### 3. Pulizia Cache
```bash
# Pulire la cache prima della pubblicazione
php artisan cache:clear
php artisan config:clear
php artisan view:clear

# Ricompilare dopo la pubblicazione
php artisan optimize
```

### 4. Gestione Timeout
```bash
# Aumentare il timeout in composer.json
{
    "config": {
        "process-timeout": 3600
    }
}

# O usare l'opzione --timeout
php artisan vendor:publish --tag=package-assets --timeout=3600
```

## Ordine di Pubblicazione
1. Pulire le cache
2. Pubblicare gli asset di Filament
3. Pubblicare gli asset dei pacchetti specifici
4. Verificare la pubblicazione
5. Ricompilare e ottimizzare

## Troubleshooting

### Se il comando va in timeout:
1. Pubblicare un pacchetto alla volta
2. Aumentare il timeout
3. Verificare lo spazio su disco
4. Controllare i permessi delle cartelle

### Se gli asset non vengono pubblicati:
1. Verificare il percorso di pubblicazione
2. Controllare i permessi
3. Verificare il tag corretto
4. Controllare il service provider

## Comandi di Verifica
```bash
# Verifica dei percorsi
php artisan route:list
php artisan vendor:list

# Verifica dei permessi
ls -la public/vendor
ls -la public_html/vendor

# Verifica delle pubblicazioni
php artisan vendor:publish --list
```

## Note Importanti
- Mantenere un elenco degli asset necessari
- Documentare i tag di pubblicazione usati
- Verificare sempre dopo la pubblicazione
- Usare percorsi relativi nei file di configurazione 