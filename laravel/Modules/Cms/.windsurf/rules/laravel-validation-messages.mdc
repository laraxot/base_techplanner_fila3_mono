---
description:
globs:
alwaysApply: true
---
# Best Practices Messaggi di Validazione Laravel

## Quando applicare (WHEN)
- Quando definisci regole di validazione in FormRequest o controller
- Quando personalizzi messaggi di errore
- Quando traduci messaggi di validazione

## Cosa fare (THEN)
- Personalizza SEMPRE i nomi dei campi con `attributes()` usando `__()`
- Per array di campi usa `campo.*.sotto_campo` e placeholder `:position`
- Scrivi messaggi custom con `messages()` per casi complessi
- Centralizza i messaggi comuni in `validation.php`, override solo se necessario
- Usa i file Laravel-Lang/lang per copertura multilingua
- Documenta ogni eccezione o regola custom

## Perché (BECAUSE)
- Migliora l'esperienza utente con messaggi chiari e localizzati
- Facilita la manutenzione e l'estensione multilingua
- Evita errori e ambiguità nei form

## Esempi

### FormRequest
```php
class StoreSpotRequest extends BaseFormRequest {
    public function rules() {
        return [
            'name' => ['required', 'string', 'max:255'],
            'location' => ['required', 'string'],
        ];
    }
    public function messages() {
        return [
            'name.required' => __('windsurf.fields.name_required'),
            'location.required' => __('windsurf.fields.location_required'),
        ];
    }
    public function attributes() {
        return [
            'name' => __('windsurf.fields.name'),
            'location' => __('windsurf.fields.location'),
        ];
    }
}
```

### File di traduzione
```php
// resources/lang/it/windsurf.php
return [
    'fields' => [
        'name' => 'Nome',
        'location' => 'Località',
        'name_required' => 'Il nome è obbligatorio',
        'location_required' => 'La località è obbligatoria',
    ],
];
```

## Checklist
- [ ] Nomi campi personalizzati in attributes()
- [ ] Messaggi custom in messages() dove serve
- [ ] Nessun testo hardcoded nei controller
- [ ] File di traduzione aggiornati
- [ ] Placeholder usati correttamente per array
- [ ] Documentazione aggiornata

## Errori Comuni
- Messaggi hardcoded nei controller
- Mancanza di attributi personalizzati
- Mancanza di traduzioni per i messaggi custom
- Mancanza di placeholder per array

## FAQ
**D: Posso usare solo validation.php di Laravel?**
R: Sì, ma per progetti multilingua e modulari è meglio separare per modulo.

**D: Come gestisco messaggi diversi per array?**
R: Usa la sintassi `campo.*.sotto_campo` e placeholder `:position`.

## Collegamenti
- [Laravel Validation Docs](mdc:https:/laravel.com/docs/validation)
- [Laravel Lang](mdc:https:/github.com/Laravel-Lang/lang)
- [README validazione](mdc:../../Modules/Lang/docs/validation-messages.md)
