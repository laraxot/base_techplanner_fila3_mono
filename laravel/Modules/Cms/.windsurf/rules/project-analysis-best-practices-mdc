---
trigger: manual
description:
globs:
---
# Best Practice Trasversali Progetto (analisi globale)

## Struttura Moduli
- Ogni modulo ha una cartella `docs` con regole, convenzioni e best practice specifiche
- Struttura coerente: `Models`, `Actions`, `Enums`, `Notifications`, `database/migrations`, `lang`, `filament`, ecc.
- Collegamenti bidirezionali tra docs dei moduli e docs generali

## Migrazioni
- Usare sempre XotBaseMigration e i suoi helper (`tableCreate`, `tableUpdate`, `$this->hasColumn`)
- Mai usare direttamente Schema::
- Documentare ogni tabella pivot e relazione in file .mdc

## Inheritance
- Usare pattern STI/Parental con colonna `type`
- Documentare inheritance e override in file dedicati

## Azioni
- Solo Action class (mai Service)
- Action queueable (spatie/laravel-queueable-action)
- Accettare contract/interfacce generici

## Activitylog
- Tracciare tutte le attivit√† rilevanti con spatie/laravel-activitylog
- Mai usare tabelle custom per log

## Traduzioni
- Tutte le label e i messaggi devono essere localizzati nei file lang del modulo
- Convenzione chiavi: `modulo::risorsa.fields.campo.label`

## Notifiche
- Solo Notification class Laravel, localizzate, inviate tramite action
- Tracciate tramite activitylog

## Errori Comuni
- Uso errato di Schema::
- Mancanza di collegamenti tra docs
- Mancanza di localizzazione
- Pattern di inheritance non documentati

## Checklist
- Ogni nuovo modulo deve avere: README, INDEX, best-practices.mdc, collegamenti docs
- Ogni nuova migrazione deve essere documentata in .mdc
- Ogni nuova action deve essere documentata e tracciata

## Collegamenti
- [Best Practice Migrazioni](./XOTBASEMIGRATION_BEST_PRACTICES.mdc)
- [Best Practice ActivityLog](./ACTIVITYLOG_MODERATION_BEST_PRACTICES.mdc)
- [Contratti Moderazione](./MODERATION_CONTRACTS.mdc)
- [Azioni Moderazione](./MODERATION_ACTIONS.mdc)
- [Stati Utente](./USER_STATES.mdc)
- [Notifiche Moderazione](./MODERATION_NOTIFICATIONS.mdc)
